
-- exporting images (save)
docker save --output httpsimpleapi.tar juliocesarmidia/http-simple-api:v1.0.0
docker save juliocesarmidia/http-simple-api:v1.0.0 > httpsimpleapi.tar



-- see layers of image
mkdir -p $PWD/httpsimpleapi/
tar xf $PWD/httpsimpleapi.tar --ignore-command-error -C $PWD/httpsimpleapi/


pushd $PWD/httpsimpleapi/

for layer in $PWD/*; do
  ls -lth $layer

  if [ -f $layer/layer.tar ]; then
    pushd $layer
    tar xf layer.tar
    popd
  fi
done

popd



-- transfering image throught network
scp julio@192.168.100.249:/home/julio/Documentos/httpsimpleapi.tar .



-- importing images (load)
docker load -i httpsimpleapi.tar
docker load < httpsimpleapi.tar






## containers
docker container run --rm -i -d \
  --name alpine \
  --hostname alpine \
  alpine sh

docker exec -it alpine sh -c "apk update && apk add curl"


docker export alpine -o $PWD/alpine.tar

docker import $PWD/alpine.tar


docker container logs -f alpine
docker container rm -f alpine


mkdir -p $PWD/rootfs && \
  tar xf $PWD/alpine.tar --ignore-command-error -C $PWD/rootfs/

unshare \
  --mount \
  --uts \
  --ipc \
  --net \
  --pid \
  --fork \
  --user \
  --map-root-user \
  chroot $PWD/rootfs sh


mount -t proc none /proc
mount -t tmpfs none /tmp
mount -t devpts none /dev/pts
mount -t tmpfs none /run
mount -t sysfs none /sys


